<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <meta name="telegram-web-app-app-id" content="-48192244">
    <title>CloneX</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/sdk@1.2.1/dist/tonconnect-sdk.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/animations.css">
</head>
<body>
    <div class="bg-effects">
        <div class="bg-circle circle-1"></div>
        <div class="bg-circle circle-2"></div>
        <div class="bg-circle circle-3"></div>
    </div>

    <div class="toast-container" id="toastContainer">
        <div class="toast" id="toast">
            <div class="toast-icon"><i class="fas fa-info-circle"></i></div>
            <div class="toast-content">
                <div class="toast-title">Information</div>
                <div class="toast-message">This is a notification message</div>
            </div>
            <button class="toast-close">&times;</button>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="walletModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Connect Wallet</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="wallet-options">
                    <div class="wallet-option" id="tonKeeperOption">
                        <div class="wallet-option-icon"><i class="fas fa-wallet"></i></div>
                        <div class="wallet-option-content">
                            <div class="wallet-option-title">Tonkeeper</div>
                            <div class="wallet-option-desc">Connect using Tonkeeper wallet</div>
                        </div>
                        <div class="wallet-option-action" id="connectTonKeeper">Connect</div>
                    </div>
                    <div class="wallet-option" id="tonHubOption">
                        <div class="wallet-option-icon"><i class="fas fa-wallet"></i></div>
                        <div class="wallet-option-content">
                            <div class="wallet-option-title">TonHub</div>
                            <div class="wallet-option-desc">Connect using TonHub wallet</div>
                        </div>
                        <div class="wallet-option-action" id="connectTonHub">Connect</div>
                    </div>
                    <div class="wallet-option" id="telegramWalletOption">
                        <div class="wallet-option-icon"><i class="fab fa-telegram"></i></div>
                        <div class="wallet-option-content">
                            <div class="wallet-option-title">Telegram Wallet</div>
                            <div class="wallet-option-desc">Connect using Telegram built-in wallet</div>
                        </div>
                        <div class="wallet-option-action" id="connectTelegramWallet">Connect</div>
                    </div>
                </div>
                <div id="walletConnectionStatus" style="margin-top: 20px; padding: 15px; background: var(--bg-tertiary); border-radius: var(--radius-md); display: none;">
                    <h4 style="margin-bottom: 10px;">Connection Status</h4>
                    <div id="walletStatusText">Connecting...</div>
                    <div class="spinner" style="margin: 10px auto;"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeWalletModal">Cancel</button>
                <button class="btn" id="disconnectWallet" style="display: none;">Disconnect</button>
            </div>
        </div>
    </div>

    <div class="modal" id="boostsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Boosts</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="boost-items">
                    <div class="boost-item" data-id="energyRegen" data-price="500" data-currency="cx">
                        <div class="boost-item-icon"><i class="fas fa-bolt"></i></div>
                        <div class="boost-item-content">
                            <div class="boost-item-title">Energy Regen Boost</div>
                            <div class="boost-item-desc">Increase energy regeneration by 0.2/s</div>
                        </div>
                        <div class="boost-item-action">
                            <span class="currency-badge cx-badge"><i class="fas fa-coins"></i> 500 CX</span>
                        </div>
                    </div>
                    <div class="boost-item" data-id="multitap" data-price="1000" data-currency="cx">
                        <div class="boost-item-icon"><i class="fas fa-hand-point-up"></i></div>
                        <div class="boost-item-content">
                            <div class="boost-item-title">Multitap Upgrade</div>
                            <div class="boost-item-desc">Get +1 tap per click</div>
                        </div>
                        <div class="boost-item-action">
                            <span class="currency-badge cx-badge"><i class="fas fa-coins"></i> 1000 CX</span>
                        </div>
                    </div>
                    <div class="boost-item" data-id="maxEnergy" data-price="1500" data-currency="cx">
                        <div class="boost-item-icon"><i class="fas fa-battery-full"></i></div>
                        <div class="boost-item-content">
                            <div class="boost-item-title">Max Energy Increase</div>
                            <div class="boost-item-desc">Increase your maximum energy by 20</div>
                        </div>
                        <div class="boost-item-action">
                            <span class="currency-badge cx-badge"><i class="fas fa-coins"></i> 1500 CX</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeBoostsModal">Cancel</button>
            </div>
        </div>
    </div>

    <div class="modal" id="shopModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Premium Shop</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="shop-items">
                    <div class="shop-item" data-id="energyPack" data-price="200" data-currency="cx">
                        <div class="shop-item-icon"><i class="fas fa-bolt"></i></div>
                        <div class="shop-item-title">Energy Pack</div>
                        <div class="shop-item-desc">Instantly refill your energy</div>
                        <div class="shop-item-price">
                            <span class="currency-badge cx-badge"><i class="fas fa-coins"></i> 200 CX</span>
                        </div>
                    </div>
                    <div class="shop-item" data-id="starterPack" data-price="1500" data-currency="cx">
                        <div class="shop-item-icon"><i class="fas fa-gem"></i></div>
                        <div class="shop-item-title">Starter Pack</div>
                        <div class="shop-item-desc">2000 CX + Energy Refill</div>
                        <div class="shop-item-price">
                            <span class="currency-badge cx-badge"><i class="fas fa-coins"></i> 1500 CX</span>
                        </div>
                    </div>
                    <div class="shop-item" data-id="premiumPack" data-price="3000" data-currency="cx">
                        <div class="shop-item-icon"><i class="fas fa-crown"></i></div>
                        <div class="shop-item-title">Premium Pack</div>
                        <div class="shop-item-desc">Permanent +2 Tap & 5000 CX</div>
                        <div class="shop-item-price">
                            <span class="currency-badge cx-badge"><i class="fas fa-coins"></i> 3000 CX</span>
                        </div>
                    </div>
                    <div class="shop-item" data-id="superEnergy" data-price="800" data-currency="cx">
                        <div class="shop-item-icon"><i class="fas fa-battery-full"></i></div>
                        <div class="shop-item-title">Super Energy</div>
                        <div class="shop-item-desc">+50 Max Energy permanently</div>
                        <div class="shop-item-price">
                            <span class="currency-badge cx-badge"><i class="fas fa-coins"></i> 800 CX</span>
                        </div>
                    </div>
                    
                    <!-- Premium items for TON -->
                    <div class="shop-item premium-item" data-id="premiumBoost" data-price="5" data-currency="ton">
                        <div class="shop-item-icon"><i class="fas fa-crown"></i></div>
                        <div class="shop-item-title">Premium Boost</div>
                        <div class="shop-item-desc">Permanent +5 Tap & 10000 CX</div>
                        <div class="shop-item-price">
                            <span class="currency-badge ton-badge"><i class="fab fa-ton"></i> 5 TON</span>
                        </div>
                    </div>
                    
                    <div class="shop-item premium-item" data-id="ultimateEnergy" data-price="10" data-currency="ton">
                        <div class="shop-item-icon"><i class="fas fa-infinity"></i></div>
                        <div class="shop-item-title">Ultimate Energy</div>
                        <div class="shop-item-desc">+100 Max Energy & 2x Regen</div>
                        <div class="shop-item-price">
                            <span class="currency-badge ton-badge"><i class="fab fa-ton"></i> 10 TON</span>
                        </div>
                    </div>
                    
                    <div class="shop-item" data-id="starMultiplier" data-price="25" data-currency="stars">
                        <div class="shop-item-icon"><i class="fas fa-times-circle"></i></div>
                        <div class="shop-item-title">Star Multiplier</div>
                        <div class="shop-item-desc">Permanent 1.5x Points Multiplier</div>
                        <div class="shop-item-price">
                            <span class="currency-badge star-badge"><i class="fas fa-star"></i> 25 Stars</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeShopModal">Cancel</button>
            </div>
        </div>
    </div>

    <div class="modal" id="tasksModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Daily Tasks</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Enhanced Daily Streak at the top -->
                <div class="streak-container">
                    <div class="streak-header">
                        <div class="streak-title">Daily Login Streak</div>
                        <div class="streak-days" id="streakDays">0 days</div>
                    </div>
                    <div class="streak-count" id="streakCount">+0 CX Today</div>
                    <div class="streak-progress">
                        <div class="streak-progress-bar" id="streakProgress" style="width: 0%"></div>
                    </div>
                    <div class="streak-reward" id="streakReward">Next reward: 50 CX</div>
                    <button class="btn" id="claimStreakBtn">Claim Daily Reward</button>
                    
                    <div class="streak-calendar">
                        <div class="streak-day" id="day0">S</div>
                        <div class="streak-day" id="day1">M</div>
                        <div class="streak-day" id="day2">T</div>
                        <div class="streak-day" id="day3">W</div>
                        <div class="streak-day" id="day4">T</div>
                        <div class="streak-day" id="day5">F</div>
                        <div class="streak-day" id="day6">S</div>
                    </div>
                </div>

                <h3 style="margin: 20px 0 15px; color: var(--primary);">Social Tasks</h3>
                
                <div class="social-task">
                    <div class="social-icon telegram-icon">
                        <i class="fab fa-telegram"></i>
                    </div>
                    <div class="social-content">
                        <div class="social-title">Join Telegram Channel</div>
                        <div class="social-desc">Follow our official Telegram channel</div>
                    </div>
                    <div class="social-action" data-url="https://t.me/CloneX_Updates" data-reward="100">
                        +100 CX
                    </div>
                </div>
                
                <div class="social-task">
                    <div class="social-icon twitter-icon">
                        <i class="fab fa-twitter"></i>
                    </div>
                    <div class="social-content">
                        <div class="social-title">Follow on Twitter</div>
                        <div class="social-desc">Follow our official Twitter account</div>
                    </div>
                    <div class="social-action" data-url="https://x.com/clonex_updates" data-reward="150">
                        +150 CX
                    </div>
                </div>
                
                <div class="social-task">
                    <div class="social-icon youtube-icon" style="background: #FF0000;">
                        <i class="fab fa-youtube"></i>
                    </div>
                    <div class="social-content">
                        <div class="social-title">Subscribe on YouTube</div>
                        <div class="social-desc">Subscribe to our YouTube channel</div>
                    </div>
                    <div class="social-action" data-url="https://youtube.com/clonex" data-reward="200">
                        +200 CX
                    </div>
                </div>
                
                <h3 style="margin: 20px 0 15px; color: var(--primary);">Daily Tasks</h3>
                <div class="task-items">
                    <div class="task-item">
                        <div class="task-item-check"></div>
                        <div class="task-item-content">
                            <div class="task-item-title">Mine 100 times</div>
                            <div class="task-item-desc">Tap the mining core 100 times</div>
                        </div>
                        <div class="task-item-action task-action" data-id="mine_100" data-reward="50">Claim</div>
                    </div>
                    <div class="task-item">
                        <div class="task-item-check"></div>
                        <div class="task-item-content">
                            <div class="task-item-title">Reach 1000 CX</div>
                            <div class="task-item-desc">Accumulate 1000 CX in your balance</div>
                        </div>
                        <div class="task-item-action task-action" data-id="reach_1000" data-reward="100">Claim</div>
                    </div>
                    <div class="task-item">
                        <div class="task-item-check"></div>
                        <div class="task-item-content">
                            <div class="task-item-title">Invite a Friend</div>
                            <div class="task-item-desc">Share your referral link</div>
                        </div>
                        <div class="task-item-action task-action" data-id="invite_friend" data-reward="200">Claim</div>
                    </div>
                    <div class="task-item">
                        <div class="task-item-check completed"></div>
                        <div class="task-item-content">
                            <div class="task-item-title">Connect Wallet</div>
                            <div class="task-item-desc">Connect your TON wallet</div>
                        </div>
                        <div class="task-item-action task-action completed" data-id="connect_wallet" data-reward="50">Claimed</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeTasksModal">Close</button>
                <button class="btn" id="claimAllTasks">Claim All</button>
            </div>
        </div>
    </div>

    <div class="modal" id="leaderboardModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Leaderboard</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="leaderboard" id="leaderboardList">
                    <!-- Leaderboard will be populated dynamically -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeLeaderboardModal">Close</button>
            </div>
        </div>
    </div>

    <div class="modal" id="notificationsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Notifications</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="notification-items" id="notificationsList">
                    <!-- Notifications will be populated dynamically -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeNotificationsModal">Close</button>
                <button class="btn" id="clearNotifications">Clear All</button>
            </div>
        </div>
    </div>

    <div class="modal" id="profileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Your Profile</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 20px;">
                    <img class="user-avatar" src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png" alt="Profile" style="width: 80px; height: 80px;">
                    <h3 id="modalUsername">User</h3>
                    <p>Level <span class="level-badge" id="modalLevel">1</span></p>
                </div>
                <div class="profile-grid">
                    <div class="profile-stat">
                        <div class="profile-stat-value" id="modalTotalTaps">0</div>
                        <div class="profile-stat-label">Total Taps</div>
                    </div>
                    <div class="profile-stat">
                        <div class="profile-stat-value" id="modalEarned">0</div>
                        <div class="profile-stat-label">Total Earned</div>
                    </div>
                </div>
                <div style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px;">Wallet Balances</h4>
                    <div class="profile-grid">
                        <div class="profile-stat">
                            <div class="profile-stat-value" style="color: #0088cc;" id="modalTonBalance">0 TON</div>
                            <div class="profile-stat-label">TON Balance</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value" style="color: #FFD700;" id="modalStarBalance">0 Stars</div>
                            <div class="profile-stat-label">Star Balance</div>
                        </div>
                    </div>
                </div>
                <div class="referral-section">
                    <h4 style="margin-bottom: 10px;">Referral Link</h4>
                    <div class="referral-input">
                        <input type="text" id="referralInput" value="https://t.me/CloneXBot?start=ref123" readonly>
                        <button class="btn btn-sm" id="copyReferralBtn">Copy</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeProfileModal">Close</button>
                <button class="btn" id="shareProfileBtn">Share Profile</button>
            </div>
        </div>
    </div>

    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Settings</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-item">
                    <div class="settings-label">Sound Effects</div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="soundToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="settings-item">
                    <div class="settings-label">Vibration</div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="vibrationToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="settings-item">
                    <div class="settings-label">Reduce Animations</div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="reduceAnimationsToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px;">Language</h4>
                    <select style="width: 100%; background: var(--bg-tertiary); border: 1px solid var(--card-border); border-radius: var(--radius-md); padding: 10px; color: var(--text-primary);">
                        <option>English</option>
                        <option>Russian</option>
                        <option>Spanish</option>
                        <option>Chinese</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeSettingsModal">Cancel</button>
                <button class="btn" id="saveSettingsBtn">Save Changes</button>
            </div>
        </div>
    </div>

    <div class="app">
        <div class="particle-effects" id="particleEffects"></div>
        <div class="tap-effects" id="tapEffects"></div>
        
        <div class="header">
            <div class="user-profile" id="profileBtn">
                <img class="user-avatar" id="profilePic" src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png" alt="Profile">
                <div class="user-info">
                    <div class="username" id="usernameDisplay">User</div>
                    <div class="user-level">Level <span class="level-badge" id="levelBadge">1</span></div>
                </div>
            </div>
            
            <div class="header-actions">
                <div class="action-btn" id="walletBtn" title="Wallet">
                    <i class="fas fa-wallet"></i>
                </div>
                <div class="action-btn" id="notificationsBtn" title="Notifications">
                    <i class="fas fa-bell"></i>
                    <div class="notification-badge">3</div>
                </div>
                <div class="action-btn" id="settingsBtn" title="Settings">
                    <i class="fas fa-cog"></i>
                </div>
            </div>
        </div>

        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-icon"><i class="fas fa-hand-point-up"></i></div>
                <div class="stat-value" id="multitapStat">1</div>
                <div class="stat-label">Multitap</div>
            </div>
            <div class="stat-item">
                <div class="stat-icon"><i class="fas fa-bolt"></i></div>
                <div class="stat-value" id="energyRegenStat">0.5/s</div>
                <div class="stat-label">Regen</div>
            </div>
            <div class="stat-item">
                <div class="stat-icon"><i class="fas fa-tachometer-alt"></i></div>
                <div class="stat-value" id="totalTapsStat">0</div>
                <div class="stat-label">Total Taps</div>
            </div>
        </div>

        <div class="balance-section">
            <div class="balance-label">Your Balance</div>
            <div class="balance-amount">
                <img class="balance-coin" src="assets/images/cx-coin.png" alt="CX">
                <span id="pointsBalance">0</span>
            </div>
        </div>

        <main class="game-area">
            <div id="multiplierBadge" class="multiplier-badge" style="display: none;">2x Active</div>
            
            <div class="mining-object" id="miningObject">
                <div class="mining-core">
                    <div class="mining-core-inner">
                        <img class="mining-coin" src="assets/images/animated-coin.png" alt="CX">
                    </div>
                </div>
            </div>
        </main>

        <div class="energy-section">
            <div class="energy-header">
                <span><i class="fas fa-bolt"></i> Energy</span>
                <span id="energyDisplay">100 / 100</span>
            </div>
            <div class="energy-bar">
                <div id="energyBarFill" class="energy-fill" style="width:100%"></div>
            </div>
        </div>

        <footer class="nav">
            <div class="nav-item active" id="boostsBtn">
                <div class="nav-icon"><i class="fas fa-rocket"></i></div>
                <div class="nav-label">Boosts</div>
            </div>
            <div class="nav-item" id="shopBtn">
                <div class="nav-icon"><i class="fas fa-store"></i></div>
                <div class="nav-label">Shop</div>
            </div>
            <div class="nav-item" id="tasksBtn">
                <div class="nav-icon"><i class="fas fa-tasks"></i></div>
                <div class="nav-label">Tasks</div>
            </div>
            <div class="nav-item" id="leaderboardBtn">
                <div class="nav-icon"><i class="fas fa-trophy"></i></div>
                <div class="nav-label">Rank</div>
            </div>
        </footer>
    </div>

    <script src="js/game-state.js"></script>
    <script src="js/effects.js"></script>
    <script src="js/ton-connect.js"></script>
    <script src="js/ui-manager.js"></script>
    <script src="js/modals.js"></script>
    <script src="js/game-functions.js"></script>
    <script src="js/main.js"></script>
</body>
</html>